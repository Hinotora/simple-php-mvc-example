## Simple MVC PHP application example

This is an example of how the MVC pattern works in PHP. This is by no means a framework or a tutorial on how to properly implement it. The example only shows the interaction of template elements.

### Install

Clone repository into your local folder:
```sh
$ git clone https://github.com/Hinotora/simple-php-mvc-example.git
$ cd simple-php-mvc-example
```
The project uses [Composer](https://getcomposer.org/download/) to manage dependencies.  All records with dependencies are stored in the file `composer.json `

Update dependencies via Composer:
```sh
$ composer update
```

### Configuration

If you want to see some debug information you can modify config file in: `/app/config.php`

Default config settings:
```php
return [
    /*
        E_ALL - Show all error messages
        0 - Don't show error messages
    */
    'ERROR_MODE' => E_ALL,

    /*
        With debug mode True, you will see debug messages about class connections:
        "Method GET not allowed"
        With debug mode False this messages will not show to you.
    */
    'DEBUG_MODE' => True,
];
```

### Usage

If you are using a local or remote server, then you need to redirect all external requests to `public/`, this folder contains the entry point (front controller) into the application, which will connect the external classes of the application.

You can also use the built-in PHP server:

```sh
$ cd public/
$ php -S localhost:8000
```
If successful you will see:
```
[Fri Nov 20 10:11:12 2020] PHP 7.4.12 Development Server (http://localhost:8000) started
```

### Demo pages

For an example of work, the application has 3 pages: Home - `/`, About - `/about` and `/about/me`.

### Routing principle

When you go to the page, you will see the welcome page. When requested to the server, the URL is split into 2 parts: controller and action.
Example: `localhost:8000/hello/world/` where `hello` - controller, `world` - action.

There are deafult values: `home` - controller, `index` - action.

| URL | controller | action |
| ------ | ------ | ------ |
| / | home | index |
| /about/ | about | index |
| /about/me/ | about | me |

Controllers are located in the `/app/controllers` folder, the class and file name must be named the same.

If a controller or action is not found for some page, the server will send you a 404 error.

### Use models

The model is needed to get the data that will be placed in the view. There may not be a model.
For example, the main page does not use a model, the data is generated by the PHP code itself in the form of an array:
```php
function index()
    {
        $data = array('page_text'=>'Using php for data generation');
        $this->view->render('home/index.html', $data);
    }
```

To create a model, you need to create a `.php` file and place it in the `/app/models` folder, inside this folder create a class with the same name as the file:
```php
/*
*    /app/models/model_about.php
*/
<?php
namespace App\Models;

class model_about extends \Core\Model
{
    function get_data()
    {
        return array('page_text'=> 'Using model for data generation');
    }
}

```
And then connect the model to the controller action:
```php
    function index()
    {
        $this->addModel('model_about');

        $data = $this->model->get_data();
        $this->view->renderTemplate('about/index.html', $data);
    }
```

### View management

#### Views

A view is an HTML document that maintains markup and placeholders for your data, which will be substituted from models.

The views are inside the folder `/app/views`

#### Template engines

For example, this application uses [TWIG](https://twig.symfony.com/) - `renderTemplate()`, with TWIG you get more options to extend your templates, but it is also possible to use only PHP - `render()`:

Both methods have the same syntax: `$this->view->renderTemplate($template_html_file, $data=null);`

The data variable is optional if you are not using models, and the path to the template is always required.

```php
    // Using TWIG
    $this->view->renderTemplate('about/index.html');

    // Using PHP
    $this->view->render('about/index.html', $data);
```

### P.S.

I'm just starting to learn PHP and don't have enough experience, so if you want to improve something in this project then create an issue or a pull request. Thank you.